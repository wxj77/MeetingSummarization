(CNN) -- Rafael Nadal may have warranted a reputation for playing through the pain barrier but surely not appendicitis.

The world number two has apparently been struggling with the condition in the build-up to this week's Shanghai Masters.

But whereas mere mortals might seek out their sick bed, Nadal has somewhat surprisingly instead opted to take to the court.

The Spaniard did at least attend a hospital in the Chinese city on Sunday after complaining of stomach problems and was treated with a course of antibiotics.

But with just two days of rest, he returned to action against countryman Feliciano Lopez Wednesday and was unsurprisingly below par -- losing the match in straight sets 6-3, 7-6 despite a spirited second-set fightback despite his ailment.

"For sure I don't feel perfect," said Nadal following the defeat, only his third to Lopez in 11 years. "It's the same way I felt before, a little bit dizzy now but that's it. Nothing that I have to worry about.

"When you lose a match, it's not the moment to talk about obvious things. I lost, Feli played better than me."

Nadal could be forgiven for feeling cursed. The previous tournament in Beijing last week had been his first since Wimbledon because of an on-going wrist injury.

Having missed much of the season, the 14-time grand slam winner insisted he had no plans to cut short his season to deal with his latest setback.

"My thoughts are to continue with Basel, Paris and London. It's true that the past few months I did not have the best of luck. I didn't have the best of luck since Wimbledon.

"I was playing a good year, very positive year. After that I was unlucky with the wrist, what's going on now. But there remains three more tournaments for me."

Nadal will consult with his doctor on his return to Spain to ascertain when he might require surgery on his appendix, doctors in Shanghai having told him "sooner or later I have to take it out."

While Nadal is struggling through his latest setback, world number one Novak Djokovic is at the top of his form and won his 50th match of the ATP Tour season

World No. 1 Novak Djokovic clinched his 50th win of the season Wednesday as he beat rising star Dominic Thiem, 6-3 6-4.

The Serb extended his unbeaten run in China to 26 matches. He is the defending champion in Shanghai and won last week's tournament in Beijing.

Andy Murray, beaten by Djokovic in the semifinals in the Chinese capital, also advanced as he saw off Jerzy Janowicz of Poland 7-5 6-2.

But Japan's Kei Nishikori exited to American hopeful Jack Sock, the Tokyo Open winner going down 7-6 6-4 in their second round match.

Bulgarian Grigor Dimitrov, like Murray and Nishikori hoping to seal a place in the end of season ATP Tour Finals in London, also went out to Frenchman Julien Benneteau in straight sets, beaten 7-5 6-3.

In the final match on court Wednesday, Roger Federer narrowly avoided going the same way, taken to a third set tiebreak by Argentina's Leonardo Mayer.

The third seeded Swiss maestro saved five match points -- the first two coming at 4-5 in the third set, the other three in the tiebreak before -- before completing a 7-5 3-6 7-6 victory in two hours 42 minutes.

Federer once saved seven match points in a match against Scott Draper in 2003 before going on to win and after his latest escape has reached the third round where he will face Roberto Bautista Agut.

@highlight

Rafael Nadal admits he's been diagnosed with appendicitis on the eve of the Shanghai Masters

@highlight

But world number two opts to play on and enter the main draw of the tournament

@highlight

He comes unstuck in straight sets against countryman Feliciano Lopez 6-3 7-6

@highlight

NEW: Roger Federer saves five match points before going through in China