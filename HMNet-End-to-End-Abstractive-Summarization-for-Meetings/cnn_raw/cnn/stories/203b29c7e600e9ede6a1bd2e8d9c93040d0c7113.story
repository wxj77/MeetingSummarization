Washington (CNN) -- U.S. telecommunications companies are trying to put some distance between themselves and U.S. government spying programs after years of quietly complying with court orders to cooperate with National Security Agency surveillance.

The Obama administration on Wednesday released a set of declassified court documents showing that in 2010, a U.S. telecom company pushed the government to prove the legality of the NSA's bulk collection of data on U.S. phone calls.

The so-called phone metadata program, authorized under Section 215 of the Patriot Act, became public last year in documents leaked by former NSA contractor Edward Snowden.

Since the Snowden disclosures, telecommucations providers have come under criticism from privacy advocates for not fighting hard enough to protect their customers' data from the government's mass surveillance programs.

Some technology companies have complained that their compliance, under court order, with U.S. surveillance programs has caused customers to distrust them and could harm their business and the U.S. economy.

In January, after a pair of conflicting federal court rulings on the legality of the data program, Verizon questioned the Foreign Intelligence Surveillance Court about the legal basis for the program. The court turned away the challenge and ordered the company to continue complying.

The documents released Wednesday show there was an earlier, more modest effort in 2010 made by at least one provider to push the government to explain the legality of the data collection.

Wednesday's declassification came after the company, unidentified in the partially redacted court documents made public, pressed the government to release the 2010 court records, according to people familiar with the matter.

The name of company remains classified, but an official familiar with the matter confirmed it was Sprint. The Washington Post first reported the name of the company and said the company's lawyers were prepared in 2010 to challenge the NSA program's legality until the government more fully explained it.

Sprint is pleased with the release of the records, spokesman John Taylor said.

"Sprint believes that substantive legal grounding should be provided when the government requests customer information from carriers," he said. "Sprint has a longstanding commitment to protecting our customers' privacy and will challenge an order for customer information that we don't think complies with the law.

"This is an important part of the debate in how our government balances the need to provide for our national security while protecting civil liberties," Taylor continued. "Sprint also believes this balance can be achieved without obligating carriers to keep customer information any longer than necessary for legitimate business purposes."

With ongoing Snowden document disclosures, the company sought the declassification to show it didn't blindly go along with government spying, according to a U.S. official familiar with the matter.

The 2010 records show the dispute fell short of a full court challenge of the NSA data collection.

But documents show the company pushed the government into negotiations to provide more information about the legality of the program. In the end, the documents show, a federal judge on the Foreign Intelligence Surveillance Court ordered the company to continue to comply with the NSA's programs.

Opinion: Let the spies spy, let the cops chase terrorists

Behind the NSA's mysterious coded tweet

@highlight

Telecommunications company challenged NSA's data collection, papers show

@highlight

The newly released documents show firms pressed U.S. to prove legality in 2010

@highlight

The companies had been criticized for not protecting customers' privacy