Tripoli, Libya (CNN) -- Lawmakers in Libya passed a law on Sunday banning senior Gadhafi government officials from holding official posts.

The move comes after a week of rising tensions in the Libyan capital of Tripoli as heavily armed protesters surrounded the Foreign and Justice ministries demanding that the legislature pass the law.

The political isolation law could exclude current senior officials such as the head of the General National Congress Mohamed al-Magariaf, who served as ambassador to India in the 1970s before he joined the exiled opposition to the Gadhafi government. The General National Congress is Libya's parliament.

It remains unclear if Prime Minister Ali Zaidan, who was a diplomat in India around the same time, would be affected by the ban.

The law, which would be implemented by a committee that would decide whether officials fall under the exclusion criteria, goes into effect in 30 days.

But the law has already come under fire by international watchdog groups.

"(The law) violates human rights and Libya's provisional constitution because it allows for guilt by association rather than provable misdeeds. The provisions and procedures for exclusion are overly broad and vague. The desire to ban corrupt and abusive officials is understandable, but this law is deeply flawed," said Hanan Salah, Human Rights Watch's Libya researcher.

Soon after the law was passed, Libyans broke into cheers as hundreds congregated outside the GNC, celebrating what many described as a victory. Celebratory gunfire rang across many areas of Tripoli as people drove around the city honking their horns and chanting in celebration.

Outside the Justice Ministry, armed protesters played music and danced as they prepared to sacrifice a camel, a Libyan tradition.

In March armed protesters surrounded the GNC for several hours in an attempt to force lawmakers to pass the law. They later opened fire on the car of Magariaf, who escaped unharmed.

There were concerns on Sunday of a repeat of these events if lawmakers had not come to an agreement.

The siege of government ministries seems to have ended with the passing of the law, but many Libyans are concerned about the implications of the vote.

"The events of last week have set a number of precedents -- the precedent that using arms to force the government to adopt a law or policy; the precedent of establishing non-equality of citizenship before the law, in effect creating classes of Libyans; and the principle that in the New Libya, people can and will be judged on the bases of general classification, not individual responsibility," said Hafed al-Ghwell, a former Gadhafi opposition figure and a Libya analyst.

@highlight

Former Gadhafi officials are now banned from official posts in Libya

@highlight

Armed protesters had pressed lawmakers to pass the law for months

@highlight

Head of parliament, prime minister may be affected by the law

@highlight

Law is "guilt by association" and unfair, Human Rights Watch says