(CNN) -- For more than a year and a half, Lakhdar Brahimi was at the front lines of talks between the two sides of Syria's civil war.

As the U.N.-Arab League special envoy to Syria, he doggedly pursued a political solution to the crisis, with little to show for it.

And now, Brahimi is resigning from his post, U.N. Secretary-General Ban Ki-moon said Tuesday.

Ban accepted the envoy's resignation "with great regret," he said, standing by Brahimi's side at U.N. Headquarters in New York.

The resignation is effective May 31.

The announcement came as a truce between Syrian rebels and the government showed signs of faltering. Rebels in Aleppo on Tuesday fired upon pro-government enclaves in that town in retaliation for Syrian troops earlier firing upon the opposition in Homs, according to the rebels and an opposition group.

Brahimi had been apologetic before for the failure of peace talks but remained a highly regarded mediator.

"The resignation of Lakhdar Brahimi is further proof of the failure of international efforts to end the horrific bloodshed in Syria," said Andy Baker, region program manager for Oxfam on the Syrian crisis. "Perhaps it's no coincidence that the peace envoy to Syria should step down when the prospect for a peaceful resolution seems as distant as ever."

The truce began last Wednesday in the strategic and symbolic city of Homs, where opposition fighters and their families underwent an evacuation, the opposition Syrian Observatory for Human Rights in London said.

Those 600 fighters and their families were evacuated to Addar al-Kabira.

But government forces shelled Addar al-Kabira this week, according to the opposition.

"The regime's shelling of the town of Addar al-Kabira north of Homs, to where rebels of Homs retreated in line with a deal organized by the U.N., makes evident the falsity of the truces that the Assad regime seeks to promote," Nasser al-Hariri, a member of the Syrian Coalition, said in a statement Tuesday. He was referring to President Bashar al-Assad's regime.

On Monday, Syrian troops opened fire on al Waer, the last known opposition stronghold in Homs, killing at least one person, the Syrian Observatory for Human Rights said.

"We consider the shelling of Waer a violation of the agreement, and it shows the government is not abiding by the truce on the ground," a statement from the Ahl al Sham rebel command center said.

"We will respond to this violation by shelling Nubul and Zahraa," two government enclaves in Aleppo, the statement said.

The rebel Ahl al Sham fighting coalition in Aleppo posted video of fighters firing rockets into the two Aleppo neighborhoods, known to be sympathetic to the government.

Originally, the opposition had agreed to allow aid into these pro-government neighborhoods, both Shiite enclaves, in exchange for the safe passage of fighters out of Homs.

@highlight

NEW: U.N. secretary-general accepts the U.N.-Arab League envoy's resignation

@highlight

Syrian rebels and the government agreed to a truce last week

@highlight

On Monday, government troops fired upon an opposition neighborhood in Homs

@highlight

On Tuesday, rebels shelled two pro-government neighborhoods in Aleppo, opposition says