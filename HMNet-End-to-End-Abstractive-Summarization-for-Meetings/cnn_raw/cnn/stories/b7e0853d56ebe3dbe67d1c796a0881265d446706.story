Washington (CNN) -- Anthony Koller's squad was ambushed in Iraq. He saw his friend die. He spent 14 months at war and returned home with a diagnosis that has become all too common for Iraq and Afghanistan veterans: post-traumatic stress disorder.

The Army discharged him but he did not receive medical benefits to which he said he was entitled. There were times when the family, with three small children, did not have any health care coverage at all.

But relief is on its way for Koller and more than 1,000 other Iraq and Afghanistan war veterans who suffer from PTSD. Under the terms of a class-action lawsuit settlement announced Friday by a veterans advocacy group, those veterans will now receive lifetime disability benefits.

The National Veterans Legal Services Program said the U.S. military violated the law by failing  to assign the veterans a 50% or higher disability rating that is needed to qualify for benefits.

"These veterans served our country in time of war, but have waited three to eight years to receive the disability benefits which they've earned for their service," said Bart Stichman, co-executive director of the veterans advocacy group.

"Today, a terrible wrong to our nation's war veterans is being righted," he said.

The case affects as many as 4,000 veterans who were medically discharged because of the disorder between 2003 and 2008. Some were receiving benefits but will now receive higher compensation.

"This is a happy ending to a sad chapter of military mistreatment of those who served our country in time of war," Stichman said.

Lawyers for the veterans group, the Justice Department and the armed services urged a speedy court approval for the tenative settlement to avoid further delays.

Expediting the settlement will help soldiers like Timothy Martin, a Bradley gunner in Iraq who lived through several firefights and bombings.

Martin, a single father, was told he could no longer serve in the military due to his PTSD, but "was separated from the military without retirement benefits and a low disability rating, well below what the law stipulated," the veterans group said.

Martin said in a court statement that his family was struggling to make ends meet. Now he will finally be able to get help from the military.

CNN's Paul Courson contributed to this report.

@highlight

Veterans with post-traumatic stress disorder filed a class-action lawsuit

@highlight

They claimed they were denied benefits

@highlight

A settlement in the case will afford them compensation

@highlight

Thousands of Iraq and Afghanistan vets suffer from PTSD