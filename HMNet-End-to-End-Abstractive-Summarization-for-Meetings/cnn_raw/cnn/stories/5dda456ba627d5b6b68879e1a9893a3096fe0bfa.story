Top lawmakers agreed to $1.1 trillion government funding bill late Tuesday, just two days before federal agencies are due to run out of money. The negotiating breakthrough likely means the government will stay open as usual, avoiding a potential shutdown.

The release of the bill was held up until late Tuesday night as negotiators haggled over a series of controversial policy provisions.

"This bill fulfills our constitutional duty to fund the government, preventing damage from shutdown politics that are bad for the economy, cost jobs and hurt middle class families," said Maryland Sen. Barbara Mikulski, a Democrat, and Kentucky Rep. Hal Rogers, a Republican, in a joint statement.

"While not everyone got everything they wanted, such compromises must be made in a divided government," they said.

RELATED: Lawmakers hustle to make last-minute spending agreement

The measure bars the District of Columbia from using any money to implement a law the city recently passed to legalize the recreational use of marijuana. Many Democrats on Capitol Hill maintain that Washington city leaders should be able to carry out a policy voters supported, but Congress has authority over the city's finances.

One of the provisions will allow for increased political donations, specifically the amount donors can give to national parties to help fund conventions, building funds and legal proceedings, such as recounts. Rather just giving the current cap of $32,400, donors would be able to give up to $97,200 for each of those actions -- for a total of $324,000 annually, according to Adam Smith, communications director for Public Campaign, a nonpartisan group that supports campaign finance reform.

The talks also yielded a compromise on a school lunch program championed by first lady Michelle Obama. The spending bill includes a measure that gives local school districts some flexibility on how they enforce nutrition standards for whole grain items on menus.

Some Democrats are already expressing opposition to a provision that repeals what they view as a key financial regulation that was part of a package of reforms for Wall Street banks. The spending bill does away with a rule that prevented banks from using funds backed by taxpayers to trade derivatives, which they argue contributed to the financial collapse in 2008.

Republicans fought to include a series of provisions to bar the Environmental Protection Agency from enforcing some environmental regulations, but many of those were not included in the final bill.

The resolution of many of these policy issues is critical to the bill's prospects for passing the House and Senate.

With a sizeable bloc of House conservatives vowing to oppose the bill because they don't think it goes far enough to block the President's executive actions on immigration, GOP leaders are relying on Democrats to help pass the bill.

The top Democrat on the House Appropriations panel, Rep. Nita Lowey of New York, said, "I strongly oppose several policy riders included in this final agreement, but I am pleased Democrats were able to eliminate many of the most damaging provisions."

House Democratic Leader Nancy Pelosi was non-committal on whether she would back the bill, but released a statement saying she would discuss it with fellow Democrats, adding that she is "hopeful."

The House is expected to vote on Thursday.

Separately, House GOP leaders are crafting a bill that extends current funding levels for a just couple of days. The House is expected to approve that measure as a backup plan to avoid a shutdown -- in case the Senate is unable to approve the broader spending bill before the deadline at midnight on Thursday.

The deal also includes emergency funding to combat the spread of Ebola both in the United States and overseas and provides additional money the Obama administration requested to fight the terror group ISIS by supporting the training and equipping of Syrian rebel groups.

@highlight

Lawmakers agree to a $1.1 trillion spending package to keep the most of the government funded through 2015

@highlight

Republicans and Democrats squabbled over policy provisions to be included in the bill

@highlight

The measure must pass by Thursday to avoid a government shutdown