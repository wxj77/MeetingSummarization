(CNN)And breathe. Real Madrid squeezed through to the quarterfinals of the European Champions League -- but only just.

The 10-time-winner escaped a humiliating exit from the tournament after going down 4-3 at home to German side Schalke allowing it to sneak through 5-4 on aggregate.

Had it not been for Cristiano Ronaldo, who scored twice to ensure his place as the record goalscorer in European football competitions, then it could have been far more embarrassing.

As it was, Real's players were met with the waving of handkerchiefs and whistles on an evening which threatened to spiral from disaster into ignominy.

Real's malaise has been well documented but this latest chapter, where it was hugely fortunate to escape with its hands still on the trophy, offered yet more questions than answers.

Carlo Ancelotti's team have endured a difficult few weeks, but if his players had arrived at the Bernabeu hoping to silence the sniping critics then they failed miserably.

This was a dire display from one of the most expensively assembled teams on the planet, who but for arguably the world's greatest player, would have succumbed to one of the most embarrassing defeats in the club's illustrious history.

Make no bones about it - Real was rumbled. Schalke, produced a fine performance, full of courage, energy and a zest which their opponent could scarcely match.

Had it not been for one player on the opposing side then perhaps this would have been one of the most famous nights in Schalke's history.

Unfortunately, that one player was Ronaldo.

As lethargic  and lackadaisical as Real was throughout the contest, Ronaldo's two goals, both headers, ensured its place in the next round.

Nobody has scored more goals than Ronaldo in European club football -- his 77th and 78th taking him to the top of the chart ahead of his nemesis, Lionel Messi.

His latest efforts may not have been the most spectacular, but they were so very precious given the nature of the tie.

Leading 2-0 from the first leg in Gelsenkirchen, Real was firm favorite to progress.

No team in the history of the competition had lost the first leg 2-0 at home and managed to progress -- and Schalke appeared unlikely to alter that statistic.

Coached by Roberto di Matteo, who led Chelsea to Champions League glory in 2012, Schalke arrived hoping to give a good account of themselves, according to the Italian.

Fifth in the German league, this was hardly a team which was supposed to send Madrid into a meltdown -- and yet that's what came to fruition.

But, given the recent form of the Carlo Ancelotti's side, perhaps this was not so unexpected.

Last weekend's league defeat at Athletic Bilbao brought about a new wave of criticism for Ancelotti.

Toppled from the summit by arch rival Barcelona, Real has struggled  in recent weeks for consistency by its own high standards.

Its astounding 22-game winning streak was curtailed by Valencia on January 4 and the style and swagger which was so evident during that run soon fell away.

A 4-0 defeat by champion and city rival Atletico in February was difficult to stomach as was the defeat in the Basque country to Bilbao -- but Real's problems stretch beyond results.

Real began slowly, in fact, slowly would have been an improvement on what was quite a dreadful opening period.

Those in white shirts appeared to be running in slow motion as Schalke took the contest to its opponent with a zest and spirit which Real could not match.

Having already fired several warning shots, Schalke finally made the breakthrough its energy and enterprise deserved when Christian Fuchs fired home after good work by Klaas-Jan Huntelaar.

Real, abject in the extreme, appeared bereft of ideas, short on confidence and as if those on the field had merely stumbled upon the stadium's turf without actually meeting one another.

Fortunately, in Ronaldo, Real has a man who has power beyond those of his fellow mortals.

Schalke's lead lasted just five minutes -- Ronaldo finding both time and space inside the penalty area before heading home from close range.

That strike, his 40th of the season, should have settled the home side down. Yet, what followed, was another example of Real's fragility.

First, Huntelaar, once a Real player, pounced upon Raphael Varane's dreadful backpass only for his effort to lack the necessary power.

Soon after, the Dutchman struck the crossbar with a fine volley from 25-yards which left Iker Casillas, the Real goalkeeper, clutching at thin air.

Schalke sensed its opportunity and with four minutes of the first half it finally struck when Max Meyer, the 19-year-old, fired home after Casillas had fumbled Huntelaar's effort.

Real was reeling -- and yet it was Ronaldo once again who got it out of trouble. Fabio Coentrao, the left-back, produced a fine cross and Ronaldo eased away from his marker to head his second of the game.

That should have been that for Schalke, at least Real might have felt that way when Karim Benzema put his side ahead for the first time on the night.

The Frenchman danced his way through the defense before coolly netting Real's third of the evening with eight minutes of the second period played.

While Real continued to threaten in attack, its defense remained suspect. Leroy Sane, just 19 years of age, was the next beneficiary of the home side's reluctance to put pressure on the ball.

The midfielder was allowed both time and space to take aim and curl a quite sumptuous effort into the far corner past the watching Casillas.

Real, unbeaten at home in the Champions League since April 2011, remained vulnerable, particularly at the heart of the midfield.

It was one of those midfielders, Luka Modric, back from injury, whose mistake gave Huntelaar the opportunity to set up a pulsating finish.

Modric's loose pass allowed the forward to take the ball in his stride before unleashing an unstoppable effort which crashed in off the underside of the crossbar.

As the whistles rang out, those in blue poured forward with the impressive Sane forcing Casillas into a fine stop as the visitors edged closer and closer to an all important fifth goal.

With the clock ticking down, Schalke threw everyone forward in search of a dramatic winner -- but when the ball broke to Benedikt Howedes, the defender could only fire his shot straight at Casillas.

The referee's whistle brought relief, though the howls of derision from the home supporters gave the players an idea of their recent failings.

"Getting through to the next round is very important for us, sometimes you have to suffer and this will make us stronger," said Modric.

"We have to get back to playing the way we were at the start of the season, we have a lot of quality and I think that we're going to see a much better Real Madrid in the next game."

Porto power through

In the night's other game, Porto trounced Swiss side FC Basel 4-0 to secure a 5-1 aggregate victory.

Porto, winners in 2004 under Jose Mourinho, eased home courtesy of goals from Yacine Brahimi, Hector Herrera, Casemiro and Vincent Aboubakar.

"You have to applaud the entire team for this fantastic performance against a very difficult opponent who came here determined to qualify," Julen Lopetegui, the Porto coach, told reporters.

"We deserve to be in the Champions League quarterfinals even if we came through qualifying.

"I am very happy and very proud of my players who showed a lot of character."

@highlight

Real Madrid qualifies for the quarterfinals of European Champions League

@highlight

Cristiano Ronaldo scores twice in 4-3 defeat by Schalke

@highlight

Real wins 5-4 on aggregate following 2-0 first leg success

@highlight

Porto through to last eight following victory over Basel