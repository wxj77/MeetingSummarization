Los Angeles (CNN) -- Chris Brown was booted from a rehab facility this month after smashing his mother's car window during a family session, his probation officer reported Wednesday.

The judge overseeing Brown's probation in his Rihanna beating case ordered the singer to immediately enter another rehab program and stay for 90 days.

Brown, who was arrested on an assault charge in Washington, D.C., last month, still faces a possibly probation violation charge that could send him to prison.

"There is much concern with the probationer's new arrest and his violent outburst that resulted in his discharge from a treatment facility," the probation report said.

The singer sat nervously in a Los Angeles County courtroom, holding girlfriend Karrueche Tran's hand as he waited while his lawyer, Mark Geragos, met privately with the judge and prosecutor before his hearing began Wednesday afternoon.

Brown's freedom has been in question since he was arrested on a sidewalk near the White House after allegedly punching a man.

The probation imposed when he pleaded guilty to a felony charge in the 2009 attack on Rihanna -- his girlfriend at the time -- requires that he stay out of legal trouble.

The lawyers and judge emerged from chambers with a deal, which required Brown to spend the next 90 days in a court-approved treatment facility.

Los Angeles County Deputy District Attorney Mary Murray told the judge she still reserved the right to ask for Brown's probation to be revoked on the D.C. arrest.

Los Angeles County Superior Court Judge James Brandlin ordered the probation officer to provide a detailed report about that incident, with that report expected to be presented when Brown returns to court on December 16.

Brown voluntarily entered a rehab center on October 28, a day after he was released from a Washington jail.

"His goal is to gain focus and insight into his past and recent behavior, enabling him to continue the pursuit of his life and his career from a healthier vantage point," representative Nicole Perna said when he entered.

When he checked out on November 10 his representative said he would continue in the program as an outpatient.

However, the probation report given to the judge Wednesday disputed that, saying he was kicked out of the program. It quoted a center official saying he was ordered out for "breaking programs rules by acting violently."

The violence involved Brown "throwing a rock through his mother's car window" after a family session at the center in which she said she wanted him to stay in the treatment.

"Mr. Brown preceded to walk outside and pick up a rock and threw it through his mother's car window and it shattered," according to letter from the rehab center included in the probation report.

Brown's "prognosis is very guarded" unless he gets professional help, the letter said,

Brown will leave the new rehab center three days a week to work eight-hour shifts of community labor so that he can complete the 1,000 hours of work still remaining in his punishment for the attack on Rihanna. The report estimated he will have to work on community labor three days of every week until next August to meet his deadline.

He may also travel to Washington for a court hearing Monday in the assault case there, the judge said. His lawyer said he would try to get the hearing delayed.

Secret Service report could help Chris Brown's defense

@highlight

Chris Brown must spend the next 90 days in a rehab facility, judge says

@highlight

The rehab is part of a deal Brown's lawyer reached with the prosecutor

@highlight

Brown's probation officer recommended the singer be ordered to rehab

@highlight

His arrest in Washington still threatens Brown's freedom