(CNN) -- Both Roger Federer and Novak Djokovic were rattled at the World Tour Finals on Saturday but ultimately won their semifinals to set up a blockbuster.

Federer saved four match points to inflict a devastating 4-6 7-5 7-6 (6) defeat on Davis Cup teammate Stan Wawrinka at the O2 Arena in London in easily the best match of a tournament that has featured an overflow of lopsided results.

"I'm very lucky," Federer told the crowd. "Stan played better from the baseline. I kept believing. I kept fighting."

Wawrinka, now 0-11 on hard courts against Federer, will have to put the disappointment behind him as he'll be on the same side as his more famous Swiss in next week's Davis Cup final at France.

Whereas Djokovic wasn't happy with the crowd Saturday in his 6-1 3-6 6-0 win over Kei Nishikori, Federer was annoyed with French chair umpire Cedric Mourier.

Having the momentum after breaking Wawrinka at love to end the second set, Federer thought he won the first point of the third set on his serve. But he apparently didn't hear Mourier overrule a Wawrinka ball originally called wide.

When Wawrinka earned the next two points, the score went to 0-40 when Federer thought it was 15-30.

He aired his views to Mourier but the score stood and Wawrinka then broke.

Even more drama unfolded later.

Federer saved three match points at 4-5 in the third on Wawrinka's serve and another on his own serve at 5-6 in the tiebreaker before converting on his first chance.

It was the third time he saved match points this year, the other occasions coming against Gael Monfils at the U.S Open and Leonardo Mayer in Shanghai.

A day after clinching the year-end No. 1 spot for the third time, meanwhile, Djokovic moved closer to another significant milestone at the World Tour Finals.

If he defeats Federer on Sunday, the Serbian would become the first man since Ivan Lendl in 1987 to claim three consecutive titles at the elite year-end championships.

Federer leads their rivalry 19-17 and triumphed in Shanghai but Djokovic has won 31 straight indoor matches.

The 33-year-old Federer also played for nearly three hours Saturday and has significantly less time to recover.

Djokovic would not have been the crowd favorite anyway, but his negative reaction when fans cheered a double fault in the second set against Nishikori might lose him more supporters.

He replied by applauding sarcastically.

"The crowd has a right to do what they want, to cheer for whoever they want," Djokovic told reporters. "(There were) some individuals that were going over the line throughout the whole match, some provocations that I usually don't react on, but I did.

"It was my fault. I lost concentration."

Nishikori had upended the world No. 1 at the U.S. Open in the last four on a sweltering September day, but Djokovic gained his revenge with an easy win indoors at the Paris Masters this month.

The way Saturday's affair started -- that, too, was an indoor duel -- it looked like a repeat of the Paris tussle. The exciting Japanese baseliner was hindered by a right wrist injury.

Djokovic cruised in the first, needing a mere 22 minutes and dropping 11 points.

When he broke in the first game of the second, this edition of the World Tour Finals was on course for an 11th straight-set result in 13 matches.

Djokovic, however, double faulted for 1-1 and that was when the momentum shifted.

Nishikori broke for 5-3 to the crowd's approval with a winning forehand after Djokovic misplayed a smash and had his older rival in trouble to begin the third.

"I allowed myself to be in that situation to lose the set, maybe even lose the match," said Djokovic. "Generally it was my fault and I should know better."

Facing the second of two break points in the first game, Djokovic almost double faulted when he struck a heavy second serve. Later in the point, Nishikori misfired on a backhand down the line.

It was the turning point of the set.

Djokovic immediately broke for 2-0 and coasted, with Nishikori double faulting on match point.

"First couple points in the third set, I thought I had it," said Nishikori, the first Asian man to reach a grand slam final. "I think I start thinking too much (that) he's (the) No. 1 player, Novak. I think I risked too much.

"I think I did too many unforced errors first couple games. Then he started playing better."

@highlight

Novak Djokovic defeats Kei Nishikori to reach the final at the World Tour Finals

@highlight

Djokovic drops his first set of the week but prevails 6-1 3-6 6-0 in about 90 minutes

@highlight

He will face Roger Federer in the final after Federer topped fellow Swiss Stan Wawrinka

@highlight

Federer saves four match points as he improves to 11-0 versus Wawrinka on hard courts