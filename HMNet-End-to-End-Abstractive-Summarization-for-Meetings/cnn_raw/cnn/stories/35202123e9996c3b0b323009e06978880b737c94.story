Stephenville, Texas (CNN)The defense rested its case Thursday in the trial of the man accused of killing Chris Kyle, subject of the hit film "American Sniper," and Kyle's friend at a Texas firing range two years ago.

No one disputes that Eddie Ray Routh shot and killed the two men. But defense attorneys say Routh was insane.

They called to testify a psychiatrist, who assessed Routh after the supposed murders. The doctor told the jury that Routh acted delusional.

Routh apparently believed his co-workers were cannibals, his neighbor was dealing drugs for the Mexican mafia and that Kyle and his friend, Chad Littlefield, were "hybrid pig people," Mitchell Dunn, the psychiatrist, testified.

"It is my opinion that he was suffering from a severe mental disease or defect that caused him not to know his conduct was wrong," he said.

However, Dunn also testified that Routh told him: "As soon as I did it, I realized I made a mistake," in an apparent reference to shooting Kyle and Littlefield.

The psychiatrist said that Routh had been hospitalized at least four times for mental health issues. Routh is not planning to take the stand in his own defense.

His trial comes just weeks after the release of the film about Kyle, a former Navy SEAL who claimed to be the deadliest sniper in U.S. history, with 160 confirmed kills in Iraq. "American Sniper," directed by Clint Eastwood and starring Bradley Cooper, has grossed the most ever for a war movie.

Kyle's autobiography by the same name spent weeks on best-seller lists. He had already risen to fame through his book when he died and was involved in charitable work to help former troops suffering from post-traumatic stress disorder.

Kyle and Littlefield took Routh to the firing range as a kind of therapy.

The range is a small, remote part of the sprawling 11,000-acre Rough Creek Lodge, and the men were isolated.

A hunting guide found Kyle, 38, and Littlefield, 35, Kyle's friend, motionless and called 911. The men were dead when officers arrived.

Who is Eddie Ray Routh?

Correction: Earlier versions of this report incorrectly described the military background of Chad Littlefield, who was killed with Chris Kyle. Littlefield was not a veteran.

Tristan Smith and Chris Lett reported from Stephenville, Texas. Dana Ford reported and wrote from Atlanta.

@highlight

Eddie Ray Routh is on trial in the shooting deaths of Chris Kyle and Chad Littlefield

@highlight

Kyle, a former Navy SEAL, claimed to be the deadliest sniper in U.S. history