WASHINGTON (CNN) -- The Senate Wednesday approved a bill to put new rules in place for intelligence agency eavesdropping on suspected terrorists.

Communication technologies like mobile phones have made the 1978 FISA bill out of date, supporters say.

The bill also effectively protects telephone companies from being sued for cooperating with a government surveillance program launched in the wake of the 2001 attacks on New York and Washington. The White House pushed hard for the provision, with a threat to veto the bill if it did not contain protection for phone companies.

The vote was 69-28, with Democratic presidential candidate Sen. Barack Obama of Illinois voting in favor. Republican candidate Sen. John McCain of Arizona was not present for the vote.

President Bush said Wednesday afternoon he will sign the bill, calling it "vital" and "long overdue."  Watch Bush praise the new FISA bill Â»

The bill, formally known as the FISA Amendments Act, updates the 1978 Foreign Intelligence Surveillance Act. It will:

Opponents argued that the provision creating a judicial review of cases against the telecommunication companies is a sham.

The bill essentially grants immunity to the telecommunication companies, the opponents said, because all of the telephone carriers received government certifications saying their participation in the program was legal.

Obama was criticized for backing away from his early opposition to the bill by liberal bloggers and individuals commenting on his campaign Web site.

Before voting for the bill, Obama voted for an amendment offered by Sen. Christopher Dodd, D-Connecticut, that would have stripped the language granting immunity to telecommunications companies.

Civil liberties groups have vowed to fight the legislation in court.

"This fight is not over. We intend to challenge this bill as soon as President Bush signs it into law," Jameel Jaffer, director of the ACLU National Security Project, said in a statement issued minutes after the Senate approved the bill. "The bill allows the warrantless and dragnet surveillance of Americans' international telephone and e-mail communications. It plainly violates the Fourth Amendment."

President Bush acknowledged in 2005 that he ordered the secretive National Security Agency to intercept communications between U.S. residents and people overseas suspected of having ties to terrorism. The administration says the program was authorized when Congress approved military action against al Qaeda after the 2001 attacks.

CNN's Pam Benson contributed to this report.

@highlight

Bill updates Foreign Intelligence Surveillance Act of 1978

@highlight

Senate passes measure by a vote of 69-28; Bush says he will sign the bill

@highlight

Bill updates eavesdropping rules to take into account technology changes

@highlight

Civil liberties groups vows to fight bill in court