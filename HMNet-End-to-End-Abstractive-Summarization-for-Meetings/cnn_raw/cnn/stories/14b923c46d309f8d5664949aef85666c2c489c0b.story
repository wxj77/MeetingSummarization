They were in classes or taking tests. Wearing their green blazers and white shirts, some of the students sat listening to a lecture.

Then, the Taliban gunmen came, bursting through doors and firing in all directions.

The horror that followed Tuesday at the Army Public School and Degree College in Peshawar, Pakistan, has shocked the world: 145 people dead, most of them children.

Here are accounts by students, teachers and parents of what they witnessed during those hellish hours.

Who are the Pakistani Taliban?

THE STUDENTS

School tie as a tourniquet

Mohammed Bilal, 13, said he was taking a math test when the gunfire started.

"My thigh was burning like metal -- I fell," the seventh-grader told CNN at Peshawar's Lady Reading Hospital where he was being treated for his injuries.

But using his school tie as a tourniquet, Mohammed managed to run to the gate and escape the mayhem.

'A lot of children are under the benches -- kill them'

Another student in the hospital, 14-year-old Ahmed Faraz, said he was in the school's auditorium when four or five people burst in through a back door and "started firing rapidly."

The ninth-grader told CNN that after a bullet hit his left shoulder, he lay under one of the benches in the room.

The militants were shouting, "God is great," as they stalked through the auditorium, according to Ahmed.

Then, he said, one of them observed that "a lot of the children are under the benches," before uttering a chilling order: "Kill them."

"My shoulder was peeking out of the bench, and somebody was following," Ahmed recalled. "They went into another room, (and when) I ran to the exit, I fell."

'Bullets whizzed past my head'

Muhammad Anas, 15, said that students in the auditorium were initially told that the sounds of bullets might be firecrackers. But then the door flew open and the attackers began firing.

"The bodies were falling in front of us," he said, and then one of the militants climbed on a desk and started shooting at individual students.

"Two bullets whizzed past my head while I lay on the floor," Anas told CNN. "Then they went outside and started firing inside from the windows."

He said that was when he got shot in his right shoulder. He lay trapped amid the gunfire until soldiers arrived.

'I saw death so close'

Shahrukh Khan, 16, was also in the auditorium. He gave Agence France-Presse a harrowing account of his brush with death.

"I saw a pair of big black boots coming towards me, this guy was probably hunting for students hiding beneath the benches," he told the French news agency. Khan said he felt burning pain in both his legs as he was shot just below the knees.

He said he played dead, cramming his tie into his mouth so that he wouldn't scream.

"The man with big boots kept on looking for students and pumping bullets into their bodies," he told AFP. "I lay as still as I could and closed my eyes, waiting to get shot again."

"My body was shivering. I saw death so close and I will never forget the black boots approaching me -- I felt as though it was death that was approaching me."

After the men left, Khan said he tried to get up but fell to the ground because of his injuries.

"When I crawled to the next room, it was horrible. I saw the dead body of our office assistant on fire," he said. "She was sitting on the chair with blood dripping from her body as she burned."

He said he took refuge behind a door and then passed out, waking to find himself on a hospital bed.

THE TEACHERS

'Some children got up and then they were shot'

Zulfikar Ahmed, a math teacher, said he was in class when he heard the start of the shooting.

"I realized it was an attack," he told CNN. "I told the children to get off their school benches and go under the benches. I hid under the benches with the children."

Ahmed, 45, said two of the militants came into the room and called out, "Everyone get up, we will not harm you."

"Some children got up and then they were shot, after which the attackers left the room," he said. "The last man came back inside and started firing again."

Ahmed was shot in the thigh.

Gunmen hit rooms 'one by one'

Mudassar Abbass, a physics lab assistant at the school, described the gunmen's ruthless approach.

"The men entered into the rooms one by one and started indiscriminately firing at the staff member and students," he told AFP.

The exams and the lecture in the auditorium meant students were grouped in different parts of the school, he said.

THE PARENTS

'A second life'

Some parents who rushed to the school or the hospitals where the wounded were being treated had their worst fears allayed.

Muhammad Arshad gave a sigh of relief after soldiers rescued his son Ehsan, The New York Times reported.

"I am thankful to God for giving him a second life," he said.

'In uniform in the morning .. in a casket now'

But many others were confronted with devastating news.

"My son was in uniform in the morning. He is in a casket now," cried Tahir Ali as he came to the hospital to collect the body of his 14-year-old son, Abdullah.

"My son was my dream," Ali told The Associated Press. "My dream has been killed."

'Why did you snatch away my son?'

Irshadah Bibi, 40, whose 12-year-old son was among the dead, beat her face in grief, AFP reported.

"O God, why did you snatch away my son?" she sobbed. "What is the sin of my child and all these children?"

She was throwing herself against an ambulance at the Lady Reading Hospital, AFP said, one of many inconsolable parents.

@highlight

"The bodies were falling in front of us," a wounded student tells CNN

@highlight

Another boy says he used his school tie as a tourniquet as he fled the carnage

@highlight

Teacher: Gunmen told students if they got up, they wouldn't be hurt -- and then shot them

@highlight

"O God, why did you snatch away my son?" cries the mother of a 12-year-old who died