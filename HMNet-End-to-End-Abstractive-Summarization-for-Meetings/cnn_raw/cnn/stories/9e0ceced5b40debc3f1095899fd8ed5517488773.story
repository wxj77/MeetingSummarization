Tucson, Arizona (CNN) -- Jared Lee Loughner was up all night before gunning down 19 people -- six fatally -- outside an Arizona supermarket, taking several trips to the supermarket's shopping plaza in between checking in at an area hotel and visiting two Walmarts to buy ammunition, according to a timeline released Friday by the Pima County Sheriff's Office.

Loughner, 22, got a room at a nearby Motel 6, but did not spend much time there late the night of January 7 and early January 8, the Sheriff's Office timeline indicates.

At 11:35 p.m., he dropped off a roll of 35 mm film at a Walgreens next door to the Safeway supermarket where the shooting occurred.

After buying something about an hour later at a nearby Circle K convenience store and checking into the Motel 6 one mile to the west on Ina Road, he returned at 2:19 a.m. to pick up the photos and make other purchases.

Fifteen minutes later, he stopped at a Chevron gas station where, according to a source with direct knowledge, he bought a doughnut, a soft drink and several energy bars. Surveillance video captured Loughner making the purchases, and he also used the pay phone at the store, according to the source.

Then, at 4:12 a.m., Loughner posted a photo of the Walgreens on his MySpace page, with the caption "Goodbye friends."

The shooting suspect headed out from his hotel room again, buying items at Walmart at the Foothills Mall, about three miles away -- once at 6:12 a.m. and again at 7:04 a.m., sandwiched around another trip to another Circle K store -- according to the timeline.

He was unsuccessful at buying ammunition at that Walmart. He then headed to a different Walmart store -- this one nearly 6 miles away in the Tucson suburb of Marana, where, at 7:27 a.m., he bought ammunition and a black backpack-style diaper bag.

Three minutes later, an officer with the Arizona Game and Fish Department pulled Loughner over for running a red light. He was given a verbal warning and released. He then headed home.

He remained there until being confronted by his father sometime before 9:40 a.m., the timeline says. He ran away with the black bag in hand.

A taxi driver picked him up around 9:41 a.m. from one of the Circle K stores he had visited and drove him to the Safeway, in the same plaza as the Walgreens. Both Loughner and the cab driver went inside the store, at 9:54 a.m., apparently so he could get change to pay his fare.

Then, at 10:10 a.m., Loughner began shooting. The first 911 call went out a minute later, and by 10:15 a.m., Loughner had been detained -- but not before 19 people had been shot, including his alleged main target, Rep. Gabrielle Giffords. She is in critical condition after being shot in the head, but her doctors have been pleased with her progress.

Security cameras at the Safeway captured the shootings, according to Capt. Chris Nanos of the Sheriff's Department. The video was sent to the FBI for analysis.

Earlier Friday, Nanos said that it could take 10 days to get DNA test results on the black bag, which contained seven boxes of 9 mm ammunition -- the same type Loughner allegedly used in the Tucson massacre.

The bag, which is now in the FBI's possession, also contained a receipt for its purchase, according to Nanos.

A teenager walking his dog spotted the bag Thursday in a dry riverbed near Loughner's family home, officials said. The teen gave it to a Qwest Communications worker, who called police.

"We certainly believe this is the bag" Loughner was carrying, Nanos said.

"We got ammunition in there, and it matches the type used in the incident," added Richard Kastigar, the department's bureau chief, on CNN's "John King USA."

Police say Loughner's father, Randy, told them his son was carrying a black bag Saturday morning, just hours before the attack.

"The father asked him questions similar to 'What are you doing? What is that?' and Jared mumbled something back to his dad, and his dad said he didn't understand what was said," Kastigar said. "It was unintelligible, and then Jared left."

The elder Loughner got in his vehicle and tried to follow his son, but could not find him, he said.

Motel 6 declined to provide additional details regarding Jared Loughner's stay at the motel, saying it "is fully cooperating with authorities on their ongoing investigation into the suspect's activities prior to the tragic shooting," according to a statement from company spokeswoman Laura Rojo-Eddy.

Police say they believe Loughner drove to the riverbed after being pulled over for running the red light and tossed the ammunition-filled bag.

After Loughner's arrest Saturday, police discovered in his pockets two 15-round gun magazines, a four-inch Buck-style knife, a plastic bag containing currency, Loughner's Arizona driver's license and a Visa credit card, said Jason Ogan, a spokesman for the Pima County Sheriff's Department.

Loughner appeared in a Phoenix federal courtroom Monday to formally hear the charges against him, including two counts of murder, two counts of attempted murder and one count of attempting to kill a member of Congress. He is now in federal custody.

Pima County on Thursday released records saying that Loughner visited the Rio Nuevo One-Stop Career Center in September, but was asked to leave because he was using a video camera and refused to turn it off despite being asked repeatedly. "He pulled a crumpled copy of the Constitution out of his pocket and waved it at me, saying it was his right," a staffer's report on the incident said.

Loughner's former community college also released records showing that he frightened fellow students and acted oddly in incidents throughout 2010. Pima Community College ultimately suspended him.

His history at the college included an incident in February in which he reacted strangely to a poem read in one of his classes and made comments about abortion, wars and killing people. Two months later, a library staffer reported he was making loud noises at a computer. Also, a teacher reported Loughner became "very hostile" after being told his grade in a Pilates class would be a B.

The incidents and disruptions continued into autumn, the records said, and college officials became concerned about Loughner's mental health. After an incident in September, a police officer delivered a suspension letter to him and recounted the events that had taken place. When the officer was finished, according to the report, Loughner responded, "I realize now that this is all a scam."

On Wednesday, the 9th U.S. Circuit Court of Appeals designated a district judge in California to hear Loughner's federal case. Judge Larry Burns is a 2003 Bush appointee serving in the U.S. District Court for Southern California, based in San Diego. The next scheduled federal hearing in the case is January 24 in Phoenix.

All federal judges in Arizona have recused themselves from hearing the case. The chief federal judge in Arizona -- Judge John Roll of Tucson -- was among those killed in the Saturday shooting.

Kastigar added that investigators are now certain that Loughner acted alone. A "person of interest" they sought immediately after the shooting turned out to be the taxi driver who dropped off the suspect at the shopping center, Kastigar said.

CNN's Susan Candiotti contributed to this report.

@highlight

Loughner bought a doughnut, energy bars at a gas station at 2:34 a.m., source says

@highlight

He visited two Walmarts and Walgreens twice in the hours before the shooting, police say

@highlight

The shooting suspect was in and out of his hotel room repeatedly early that morning

@highlight

Police say it will take 10 days to get DNA test results on a black bag related to the probe