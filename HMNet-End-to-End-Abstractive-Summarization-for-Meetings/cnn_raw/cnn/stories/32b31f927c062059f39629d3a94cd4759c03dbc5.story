The day ended with two slain New York police officers. But it started, investigators say, when Ismaaiyl Brinsley found a way to slip into his ex-girlfriend's apartment building.

A fight over the status of their relationship quickly erupted around 5:30 a.m. Saturday after Brinsley unexpectedly knocked on the door of the apartment in the Baltimore suburb of Owings Mills, Maryland, police said.

During the dispute, Brinsley pointed a gun at his own head, New York Police Chief of Detectives Robert Boyce told reporters.

Shaneka Nicole Thompson, a 29-year-old who'd known Brinsley for about a year and was once romantically involved with him, persuaded him not to shoot himself.

But just 20 minutes after Brinsley arrived, calls of a shot fired there came into 911.

Thompson had been shot in the stomach with a 9mm semiautomatic handgun.

By the time police arrived, police said, Brinsley had fled -- stealing Thompson's cell phone and carrying it with him as he headed north on the highway.

Minutes later, he called her mother and apologized, telling her he'd shot Thompson "by accident and that he hopes she lives," Boyce said.

She was seriously injured, police said, but her condition is improving and she's expected to survive.

After the shooting, police scrambled to search for the gunman.

"The victim says the subject does not have a driver's license. He's currently homeless. He has no friends of family in the area," a police dispatcher says in calls after the shooting obtained by CNN affiliate WJZ.

"New York," the dispatcher continues. "His family's in New York."

Social media messages spur warning

Baltimore County Police said it was one of Thompson's friends who alerted them Saturday afternoon to troubling Instagram posts. The friend believed they came from Brinsley.

"These posts included overt threats to kill police officers," police said, and they appeared to be posted in Brooklyn, New York.

"I'm putting wings on pigs today ... they take one of ours, let's take two of theirs," one Instagram post said.

Around 2:10 p.m., 40 minutes after speaking with the friend, Baltimore County Police said they called a New York Police Department precinct to warn them. Then they faxed a "wanted" poster with Brinsley's picture.

"Suspect is armed with a 9mm handgun and has posted pictures on Instagram saying that he will shoot a police officer today," a description on the flier says.

"PLEASE USE EXTREME CAUTION," it says in large red letters. "THREATS ON POLICE," it continues. "ARMED SUBJECT."

But the message to be on alert apparently came too late.

While New York Police Department notifications about the warning were going out, Boyce said, Brinsley ambushed two officers in their patrol car, shooting them dead.

New York police praised their Baltimore counterparts for their efforts.

"All things were done exactly the way they were supposed to. ... There was no lapse on anybody's part," Boyce said.

Ex-girlfriend to detectives: He never mentioned police

Speaking to police detectives from her hospital bed Sunday night, Thompson -- a member of the Air Force reserves -- told them Brinsley didn't say he wanted to kill police or mentioned anything about officers when they fought Saturday morning.

"The argument on Saturday morning was about them and their relationship," Baltimore County police spokeswoman Elise Armacost told WJZ.

Boyce described Thompson as a "very courageous young woman" who tried to persuade her ex-boyfriend not to take his own life.

"He put the gun to his own head when he broke into her apartment. Then she talked him out of that, and he later shot her before he left," Boyce said.

Before that day, Boyce said, "she said she'd never seen him with a gun."

Lengthy criminal history

Long before Saturday's shootings, Brinsley was no stranger to police.

He had an extensive criminal record, including at least 19 arrests, a two-year prison term and several stints in Georgia jails, Boyce said.

Brinsley's mother told detectives she hadn't seen her son in a month. He "had a very troubled childhood," "was often violent" and had tried to commit suicide, she told them, according to Boyce.

"This has nothing to do with police retaliation," Jalaa'a Brinsley, the gunman's older sister, told CNN affiliate WCBS. "This was a troubled, emotionally troubled, kid. He needed help. He didn't get it."

When they were children, she said, she was "best friends" with her brother.

"But when he turned to a life of crime," she said, "I had to separate myself from him."

It wasn't immediately clear, Boyce said, how Brinsley got the gun he used to shoot his ex-girlfriend and two police officers before turning the weapon on himself.

A man bought the handgun at a Georgia pawn shop in 1996, when Brinsley was just 9.

Detectives are working with the Bureau of Alcohol, Tobacco and Firearms, Boyce said, "to find out where (the gun) could have fallen into his hands."

In a 2011 hearing in Cobb County, Georgia, Brinsley pleaded guilty to theft, property damage, possession of a firearm by a felon and discharging a gun near a public street after he used a stolen .25 caliber semiautomatic handgun to fire into a gold Chevy Malibu.

When asked by a judge at the hearing whether he'd ever been a patient in a mental institution or under the care of a psychologist or psychiatrist, he answered yes, according to court documents.

His aunt and sister told WCBS that his family struggled to understand why he was set free after so many run-ins with the law.

"They kept releasing him into the streets," Jalaa'a Brinsley said, "so isn't that a problem that the justice system should be asking, not us."

Detectives comb social media posts

On social media, Brinsley also had a history, posting numerous rants on Instagram, Boyce said. Detectives are investigating his past posts on Facebook and Instagram, and looking through his e-mails and phone records.

"What we're seeing from this right now is anger against the government, anger at the police," Boyce said.

Some posts mentioned Michael Brown and Eric Garner, whose killings by police have sparked protests across the country.

"I always wanted to be known for doing something right," one of his last posts on social media said. "But my past is stalking me and my present is haunting me."

And it's not just his posts that detectives are looking into.

They're also looking at social media to investigate anyone who posted responses to Brinsley's posts that could lead to violence, New York Police Department sources said.

Shortly before he shot the officers in New York, Boyce said, Brinsley spoke with two people and asked them three things.

"He asked for their gang affiliation," Boyce said. "He asked them to follow him on Instagram. And then he says, 'Watch what I'm going to do.' "

@highlight

Police say Shaneka Thompson's condition is improving

@highlight

Her ex-boyfriend shot her, then killed two New York Police officers

@highlight

Baltimore County Police sent a warning to the New York Police Department about him

@highlight

While a notification was going out, police say, Brinsley ambushed two officers