Kennett, Missouri (CNN) --  A woman accused of cutting in line at a Wal-Mart, shoving merchandise and assaulting police officers will plead guilty to disturbing the peace and resisting arrest, both misdemeanors.

Under the agreement -- reached after the jury received the case for deliberations -- Heather Ellis will plead guilty to disturbing the peace and resisting arrest. She will serve a year of unsupervised probation, attend an anger management course and serve four days in jail before the end of the year.

The sentence stipulates that if Ellis stays out of trouble for a year, the charges will be sealed and the arrest won't be on her permanent record.

Ellis said after court was adjourned that she was "taking responsibility for her actions and [hopes] that everyone else involved in the case will take responsibility for theirs."

Earlier Friday, Ellis, 24, took the stand and denied all charges in the racially charged case.

Witnesses and police say Ellis cut in front of customers at a Wal-Mart in January 2007, pushed aside merchandise belonging to another customer to make room for hers on the conveyor belt and, after police were called to the scene, kicked one officer in the shin and split another's lip. The prosecution has also alleged the Ellis went "ballistic in a profane tirade" that continued when police officers arrived.

Ellis, now a schoolteacher, denied all accusations against her, although she acknowledged in her Friday testimony that she touched another shopper's items on the conveyor belt.

She was initially charged with assaulting police officers, resisting arrest and disturbing the peace. Had she been convicted of those charges, she could have been sentenced to up to 15 years in prison.

Ellis, then a college student with no criminal history, has said that some white patrons shoved and hurled racial slurs at her when she switched checkout lines. Store employees refused to give her her change and called police, she said.

She said Friday that the incident began when she joined her cousin in the checkout line and was ignored by the clerk. She did not not cut in line and did not yell or use profanity, said Ellis, who has not spoken about the case outside of court.

As she left the store, Ellis told the Dunklin County Circuit Court, a police officer told her, "Look at this stupid bitch. Take your ass back to the ghetto."

She alleged that an officer behind her forcefully grabbed her shoulder without telling her she was being arrested.

She did not resist, but said her body was "flung around" by officers. She screamed loudly for help as officers "choked" her and pulled her hair, but she did not hit or kick them, she testified.

Testimony from Ellis' cousin, who was with her at the Wal-Mart, and from her aunt, whom the cousin called as Ellis was arrested, backed up the young woman's account.

Ellis said she saw a doctor after the incident because tight handcuffs had cut her and made her bleed. She said she also had a headache and neck pain from the incident.

An emergency room doctor testified that he had seen bruises on one of Ellis' wrists, but did not see cuts or bleeding. He also said he did not see any neck or head injuries.

Surveillance tapes from the store were shown in court Thursday and released publicly, but the tapes don't show much of the alleged confrontation.

A camera from above the cash register appeared to show Ellis' arm shoving merchandise to the side on the register's conveyor belt. Another camera showed her being led out of the store by police, with her arm in the air. A third, from the parking lot, showed her being handcuffed and put into a police car. It appeared to show Ellis kicking backward at police, as authorities allege. Her defense maintains she did so after police had assaulted her.

Officials with the American Civil Liberties Union and the Southern Christian Leadership Conference have said the case is indicative of racial bias in the town, where 13 percent of the population is African-American.

Black and Hispanic residents have long complained of being unfairly profiled during traffic stops by the predominantly white police department.

When Ellis' supporters held a peaceful rally in June, officers found business cards scattered along the route that read: "You have been paid a social visit by the Knights of the Ku Klux Klan. The next visit will not be social."

During another rally on Monday, a handful of opponents stood on the sidelines waving Confederate flags.

Her lawyers have not brought up race as a contributing factor in the incident.

Two years ago, prosecutors offered a plea deal under which Ellis would have received probation if she dropped her complaint against the police.

"She decided not to sign it, because she was taught to never admit guilt when you're innocent," her father has said.

CNN's David Mattingly and Tristan Smith contributed to this report.

@highlight

NEW: Ellis' permanent record will be cleared if she stays out of trouble for a year

@highlight

Heather Ellis agrees to probation, anger-management class

@highlight

Plea deal reached as jury deliberated

@highlight

Ellis testifies on her own behalf in racially charged case